#!/bin/bash


usage() {
cat << EOF
Ansible playbooks and roles are located in 'lib/ansible_collections'.

Configure Linux with Ansible:

  uws set [target] {<user>@<host>:<port> {--private-key=<path>}}

  The required [target] can be one of:
  * <playbook>
  * roles/<role>
  * roles/<namespace>.<collection>.<role>
  * tasks/<relative path within a role>

  If the second arg is passed, runs via SSH. If no '--private-key' is provided,
  uses the password for auth.

Run tests:

  uws test {sh|py|ansible}

See docs for local Ansible modules:

  uws doc local.uws.<name>
EOF
}


uws="$(cd $(dirname $BASH_SOURCE[0]) && pwd)"
exe="$uws/util/uws/${1:-}.sh"

[[ ! -f "$exe" ]] && {
  usage
  exit 1
}

shift
"$exe" $@
